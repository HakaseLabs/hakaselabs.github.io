<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Here&#39;s What&#39;s New  In Go 1.10 - hakaselogs</title><link rel="icon" type="image/png" href=/images/favicon.png /><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta itemprop="name" content="Here&#39;s What&#39;s New  In Go 1.10">
<meta itemprop="description" content="The latest Go release, v1.10 arrived six months after V1.9. This release was stated in the change-logs and the Go blog. I&#39;m gonna share some interesting changes I&#39;ve found in Go 1.10 with you.">
<meta itemprop="dateModified" content="2018-03-06T00:00:00+00:00" />
<meta itemprop="wordCount" content="1529">



<meta itemprop="keywords" content="changelog,golang,go," />
<meta property="og:title" content="Here&#39;s What&#39;s New  In Go 1.10" />
<meta property="og:description" content="The latest Go release, v1.10 arrived six months after V1.9. This release was stated in the change-logs and the Go blog. I&#39;m gonna share some interesting changes I&#39;ve found in Go 1.10 with you." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hakaselogs.me/2018-03-06/heres-whats-new-in-go-1.10/" />
<meta property="article:published_time" content="2018-03-06T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-03-06T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Here&#39;s What&#39;s New  In Go 1.10"/>
<meta name="twitter:description" content="The latest Go release, v1.10 arrived six months after V1.9. This release was stated in the change-logs and the Go blog. I&#39;m gonna share some interesting changes I&#39;ve found in Go 1.10 with you."/>
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" media="screen" href="https://hakaselogs.me/css/normalize.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://hakaselogs.me/css/main.css" />

        <link id="dark-scheme" rel="stylesheet" type="text/css" href="https://hakaselogs.me/css/dark.css" />

	<script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
		<script src="https://hakaselogs.me/js/main.js"></script>
</head>

<body>
	<div class="container wrapper">
		<div class="header">
	
		<div class="avatar">
			<a href="https://hakaselogs.me/">
				<img src="https://storage.googleapis.com/gopherizeme.appspot.com/gophers/0f1736136b4fcbea61798f9d4d04a6b01f4a05ad.png" alt="hakaselogs" />
			</a>
		</div>
	
	<h1 class="site-title"><a href="https://hakaselogs.me/">hakaselogs</a></h1>
	<div class="site-description"><p>Notes mostly about software engineering and what I&rsquo;m working on.</p><nav class="nav social">
			<ul class="flat"><li><a href="https://twitter.com/codehakase" title="Twitter"><i data-feather="twitter"></i></a></li><li><a href="https://github.com/codehakase" title="Github"><i data-feather="github"></i></a></li></ul>
		</nav>
	</div>

	<nav class="nav">
		<ul class="flat">
			
			<li>
				<a href="/">Home</a>
			</li>
			
			<li>
				<a href="/posts">Archive</a>
			</li>
			
			<li>
				<a href="/projects">Projects</a>
			</li>
			
			<li>
				<a href="/tags">Tags</a>
			</li>
			
		</ul>
	</nav>
</div>


		<div class="post">
			<div class="post-header">
        
				
					<div class="meta">
						<div class="date">
							<span class="day">06</span>
							<span class="rest">Mar 2018</span>
						</div>
					</div>
				
        
				<div class="matter">
					<h1 class="title">Here&#39;s What&#39;s New  In Go 1.10</h1>
				</div>
			</div>
					
			<div class="markdown">
				<blockquote>
<p>Go 1.8 is one year old (Happy belated Birthday ðŸŽŠ ðŸŽ‰)
Go 1.9 is already 6 months old!
Go 1.10 is out âœŒ</p>
</blockquote>
<p>The latest Go release, <strong>v1.10</strong> arrived six months after V1.9. This release was stated in the change-logs and the Go blog. I&rsquo;m gonna share some interesting changes I&rsquo;ve found in Go 1.10 with you.</p>
<h2 id="new-features">New Features</h2>
<h3 id="the-language">The Language</h3>
<p>Go 1.10 offers compiler tool chain and performance improvements, but no significant changes was made to the language&rsquo;s specification.</p>
<h3 id="ports">Ports</h3>
<p>In this release, there are no new supported operating systesm or processor architectures. Main focus has been on strengthening the support of existing ports, introducing  <a href="https://golang.org/doc/go1.10#asm%5D">new instructions in the assembler</a>, and improvements to the code generated by the compilers.</p>
<h4 id="notes-on-existing-ports">Notes On Existing Ports</h4>
<p>Go 1.10 now requires FreeBSD 10.3 or later. Support for FreeBSD 9.3 has been removed.</p>
<p>Go now runs on NetBSD again, but requires NetBSD 8 (unreleased) - Only <em>GOARCH amd64</em> and <em>386</em> have been fixed, <em>arm</em> port is still broken.</p>
<p>Go 1.10 is the last release that will run on OpenBSD 6.0. Go 1.11 will require OpenBSD 6.2.</p>
<p>On 32-bit MIPS systems, the new environment variable settings <code>GOMIPS=hardfloat</code> (the default) and <code>GOMIPS=softfloat</code> select whether to use hardware instructions or software emulation for floating-point computations.</p>
<p>Go 1.10 is the last release that will run on OS X 10.8 Mountain Lion or OS X 10.9 Mavericks. Go 1.11 will require OS X 10.10 Yosemite or later.</p>
<p>Go 1.10 is the last release that will run on Windows XP or Windows Vista. Go 1.11 will require Windows 7 or later.</p>
<h3 id="tooling">Tooling</h3>
<h4 id="default-goroot--gotmpdir">Default GOROOT &amp; GOTMPDIR</h4>
<p>In Go 1.10, if the environment variable <code>$GOROOT</code> is not set, the go tool uses the default <code>GOROOT</code> during compilation, by deducing <code>GOROOT</code> from its own executable path. This change was made, to allow binary distributions to be unpacked anywhere in the file system and then be used without setting <code>GOROOT</code> explicitly.  A new variable <code>$GOTMPDIR</code> was added to control where temporary files are created.</p>
<h4 id="go-build--go-install">Go Build &amp; Go Install</h4>
<p>In previous versions, running <code>go build </code>, detects changes of packages based on the time it was modified. The <code>go build</code> command now detects out-of-date packages purely based on th content of source files, specified build flags, and metadata stored in the compiled packages.
The <code>go build -asmflags, -gcflags, -gccgoflags,</code> and <code>ldflags</code> options are applied by default only to packages listed directly on the command line. For example, <code>go build -gcflags=-m mypackage</code> passes the compiler the <code>-m</code> flag when building <code>mypackage</code> but not its dependencies. <code>go build -asmflags=pattern=flags ...</code> applies the flags only to the packages matching the pattern. For example <code>go install -ldflags=cmd/gofmt=-X=main.version=1.2.3 cmd/ ...</code> installs all the commands matching <code>cmd/...</code> but only applies the <code>-X</code> option to the linker flags for <code>cmd/gofmt</code>.</p>
<h4 id="testing">Testing</h4>
<p>The <code>go test ..</code> command now caches test result if the test executable and command line matches a previous run, and the files and environment variables consulted by the run have not changed. <code>go test</code> will print the previous test output,  replacing the elapsed time with the string <strong>&ldquo;cached&rdquo;</strong>.  The <code>go test</code> command now runs <code>go vet</code> on the testing package to identify significant problems before running the test(s). <code>go vet</code> can be disabled by passing the <code>-vet=off</code> flag to the <code>go test</code> command - <code>go test -vet=off</code>
The <code>go test -coverpkg</code> flag now interprets its argument as a comma-separated list of patterns to match against the dependencies of each test. For example, <code>go test -coverpkg=all</code> is now a more meaningful way to run a test with coverage enabled for the test package and all its dependencies.
Passing the <code>-failfast</code> flag to <code>go test</code> disables running additional tests after any test fails.
There&rsquo;s a new flag <code>-json</code> when used with <code>go test</code>, converts the test output to JSON format - <code>go test -json</code></p>
<h4 id="godoc">GoDoc</h4>
<p>The <code>go doc</code> tool now adds functions returning slices of <code>T</code> or <code>*T</code> to the display of <code>type T</code>.  For example:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ go doc mail.Address
package mail // import <span style="color:#a31515">&#34;net/mail&#34;</span>

type Address struct {
	Name    string
	Address string
}
    Address represents a single mail address.

func ParseAddress(address string) (*Address, error)
func ParseAddressList(list string) ([]*Address, error) // Pointer is included
func (a *Address) String() string
</code></pre></div><p>In Go 1.9 <code>go doc mail.Address</code> outputs:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">package mail // import <span style="color:#a31515">&#34;net/mail&#34;</span>

type Address struct {
 Name    string
 Address string
}
    Address represents a single mail address. An address such as <span style="color:#a31515">&#34;Barry Gibbs
</span><span style="color:#a31515">    &lt;[bg@example.com](mailto:bg@example.com)&gt;&#34;</span> is represented as Address{Name: <span style="color:#a31515">&#34;Barry Gibbs&#34;</span>, Address:
    <span style="color:#a31515">&#34;[bg@example.com](mailto:bg@example.com)&#34;</span>}.

func ParseAddress(address string) (*Address, error)
func (a *Address) String() string
</code></pre></div><p>Difference between both is the display of <code>ParseAddressList</code> which was only shown  the package overview - <code>go doc mail</code>.</p>
<h4 id="go-vet">Go Vet</h4>
<p>The <code>go vet</code> command now always have access to complete, up-to-date type information when checking packages, even for packages using <code>cgo</code> or vendored imports.</p>
<h4 id="diagnostics">Diagnostics</h4>
<p>Go 1.10 includes a new <a href="https://golang.org/doc/diagnostics.html">overview of available Go program diagnostic tools</a></p>
<h4 id="gofmt">Gofmt</h4>
<p>Go 1.10 changed two minor details of the default formatting of Go source code. For instance, a certain complex three-index slice expression formatted like <code>x[i+1 : j:k</code> is now formatted with more consistent spacing: <code>x[i+1 : j : k</code>. Inline interface with single methods is now supported:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00f">type</span> CarService <span style="color:#00f">interface</span> { Check() }
</code></pre></div><p>Running <code>go fmt</code> in Go 1.9 formats the above to:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00f">type</span> CarService <span style="color:#00f">interface</span> {
  Check()
 }
</code></pre></div><h4 id="go-fix">Go Fix</h4>
<p>The <code>go fix</code>  tool now replaces imports of <code>golang.org/x/net/context</code> with <code>&quot;context&quot;</code></p>
<h3 id="runtime">Runtime</h3>
<p>The behavior of nested calls to <a href="https://golang.org/pkg/runtime/#LockOSThread"><code>LockOSThread</code></a> and <a href="https://golang.org/pkg/runtime/#UnlockOSThread"><code>UnlockOSThread</code></a> has changed. These functions control whether a goroutine is locked to a specific operating system thread, so that the goroutine only runs on that thread, and the thread only runs that goroutine. Previously, calling <code>LockOSThread</code> more than once in a row was equivalent to calling it once, and a single <code>UnlockOSThread</code> always unlocked the thread. Now, the calls nest: if <code>LockOSThread</code> is called multiple times, <code>UnlockOSThread</code> must be called the same number of times in order to unlock the thread. Existing code that was careful not to nest these calls will remain correct. Existing code that incorrectly assumed the calls nested will become correct. Most uses of these functions in public Go source code falls into the second category.</p>
<p>In Go 1.10, there&rsquo;s a change. if <code>LockOSThread</code> is called multiple times, <code>UnlockOSThread</code> must be called the same number of times in order to unlock the thread. Detail the changes you can follow links:
<a href="https://github.com/golang/go/issues/20458">https://github.com/golang/go/issues/20458</a>
<a href="https://go-review.googlesource.com/c/go/+/45752">https://go-review.googlesource.com/c/go/+/45752</a></p>
<p>There is no longer a limit on the <code>[GOMAXPROCS](https://tip.golang.org/pkg/runtime/#GOMAXPROCS)</code> setting.</p>
<h3 id="performance">Performance</h3>
<p>As always, the changes are so general and varied that precise statements about performance are difficult to make. Most programs should run a bit faster, due to speedups in the garbage collector, better generated code, and optimizations in the core library.</p>
<h3 id="changes-to-standard-library">Changes to Standard Library</h3>
<p>Here I&rsquo;ll list some changes to the Go standard library as of Go 1.10, full details on this can be found on the <a href="https://golang.org/doc/go1.10">official release doc</a></p>
<h4 id="lib-neturl">Lib: net/url</h4>
<p>The <code>ResolveReference</code> method now preserves multiple leading slashes n the target URL. Previously, it rewrote multiple leading slashes to a single slash, which resulted in the <code>http.Client</code> following certain redirects incorrectly. Consider following code:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">base, _ := url.Parse(<span style="color:#a31515">&#34;http://host//path//to/page1&#34;</span>)
target, _ := url.Parse(<span style="color:#a31515">&#34;page2&#34;</span>)
fmt.Println(base.ResolveReference(target))
</code></pre></div><p>In Go 1.9, the output of the above is <code>http://host/path//to/page2</code>
In Go 1.10, the resolved URL is <code>http://host//path//to/page2</code></p>
<p>Note the doubled slashes around <code>path</code>. In Go 1.9 and earlier, the resolved URL was <code>http://host/path//to/page2</code>: the doubled slash before <code>path</code> was incorrectly rewritten to a single slash, while the doubled slash after <code>path</code> was correctly preserved. Go 1.10 preserves both doubled slashes, resolving to <code>http://host//path//to/page2</code> as required by <a href="https://tools.ietf.org/html/rfc3986#section-5.2">RFC 3986</a>.</p>
<p>This change may break existing buggy programs that unintentionally construct a base URL with a leading doubled slash in the path and inadvertently depend on <code>ResolveReference</code> to correct that mistake. For example, this can happen if code adds a host prefix like <code>http://host/</code> to a path like <code>/my/api</code>, resulting in a URL with a doubled slash: <code>http://host//my/api</code>.</p>
<h4 id="lib-os">Lib: os</h4>
<p><a href="https://golang.org/pkg/os/#File"><code>File</code></a> adds new methods <a href="https://golang.org/pkg/os/#File.SetDeadline"><code>SetDeadline</code></a>, <a href="https://golang.org/pkg/os/#File.SetReadDeadline"><code>SetReadDeadline</code></a>, and <a href="https://golang.org/pkg/os/#File.SetWriteDeadline"><code>SetWriteDeadline</code></a> that allow setting I/O deadlines when the underlying file descriptor supports non-blocking I/O operations. The definition of these methods matches those in <a href="https://golang.org/pkg/net/#Conn"><code>net.Conn</code></a>. If an I/O method fails due to missing a deadline, it will return a timeout error; the new <a href="https://golang.org/pkg/os/#IsTimeout"><code>IsTimeout</code></a> function reports whether an error represents a timeout.</p>
<p>Also matching <code>net.Conn</code>, <code>File</code>'s <a href="https://golang.org/pkg/os/#File.Close"><code>Close</code></a> method now guarantee that when <code>Close</code> returns, the underlying file descriptor has been closed. (In earlier releases, if the <code>Close</code> stopped pending I/O in other goroutines, the closing of the file descriptor could happen in one of those goroutines shortly after <code>Close</code> returned.)</p>
<p>On BSD, macOS, and Solaris systems, <a href="https://golang.org/pkg/os/#Chtimes"><code>Chtimes</code></a> now supports setting file times with nanosecond precision (assuming the underlying file system can represent them).</p>
<h4 id="lib-strconv">Lib: strconv</h4>
<p><a href="https://golang.org/pkg/strconv/#ParseUint"><code>ParseUint</code></a> now returns the maximum magnitude integer of the appropriate size with any <code>ErrRange</code> error, as it was already documented to do. Previously it returned 0 with <code>ErrRange</code> errors.</p>
<h2 id="conclusion">Conclusion</h2>
<p>This article was made to point out some changes made to the Go programming language. Having been using Go since v1.8 some of the changes to v1.10 brings optimization and faster runtime to developing Go programs. Have you upgraded your existing Go codebases to V1.10? Share your experience in the comment section below ðŸ˜„.</p>
<h4 id="references">References</h4>
<p><a href="https://golang.org.doc/go1.10">https://golang.org.doc/go1.10</a></p>

      </div>
      <div>
        <br>
        <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?serve=CK7DTK7L&placement=hakaselogsme" id="_carbonads_js"></script>
			</div>

			<div class="tags">
				
					
						<ul class="flat">
							
							<li><a href="/tags/changelog">changelog</a></li>
							
							<li><a href="/tags/golang">golang</a></li>
							
							<li><a href="/tags/go">go</a></li>
							
						</ul>
					
				
			</div></div>
	</div>
	<div class="footer wrapper">
	<nav class="nav">
		<div>2021  Â© hakaselogs |  <a href="https://github.com/knadh/hugo-ink">Ink</a> theme on <a href="https://gohugo.io">Hugo</a></div>
	</nav>
</div>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-90124514-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script>feather.replace()</script>
</body>
</html>
